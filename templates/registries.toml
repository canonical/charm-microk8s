# !!! autogenerated.charm.registries.begin
  [plugins."io.containerd.grpc.v1.cri".registry.configs]
  {%- for registry in custom_registries %}
    {%- if registry.username and registry.password %}
    [plugins."io.containerd.grpc.v1.cri".registry.configs."{{ registry.url }}".auth]
      username = "{{ registry.username }}"
      password = "{{ registry.password }}"
    {%- endif -%}
  {% endfor -%}
  {%- for registry in custom_registries %}
    {%- if registry.ca or registry.cert or registry.key or registry.insecure_skip_verify %}
    [plugins."io.containerd.grpc.v1.cri".registry.configs."{{ registry.url }}".tls]
      ca_file   = "{{ registry.ca_file if registry.ca_file else '' }}"
      cert_file = "{{ registry.cert_file if registry.cert_file else '' }}"
      key_file  = "{{ registry.key_file if registry.key_file else '' }}"
      insecure_skip_verify = {{ "true" if registry.insecure_skip_verify else "false" }}
    {%- endif -%}
  {% endfor %}
# !!! autogenerated.charm.registries.end
